function e(e,...t){if("string"==typeof t[0]){e(`[wxt] ${t.shift()}`,...t)}else e("[wxt]",...t)}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const t=(...t)=>e(console.debug,...t),n=(...t)=>e(console.error,...t);let r;try{(function(){if(null==r){const e="ws://localhost:3000";t("Connecting to dev server @",e),r=new WebSocket(e,"vite-hmr"),r.addWxtEventListener=r.addEventListener.bind(r),r.sendCustom=(e,t)=>r?.send(JSON.stringify({type:"custom",event:e,payload:t})),r.addEventListener("open",()=>{t("Connected to dev server")}),r.addEventListener("close",()=>{t("Disconnected from dev server")}),r.addEventListener("error",e=>{n("Failed to connect to dev server",e)}),r.addEventListener("message",e=>{try{const t=JSON.parse(e.data);"custom"===t.type&&r?.dispatchEvent(new CustomEvent(t.event,{detail:t.data}))}catch(t){n("Failed to handle message",t)}})}return r})().addWxtEventListener("wxt:reload-page",e=>{e.detail===location.pathname.substring(1)&&location.reload()})}catch(o){n("Failed to setup web socket connection with dev server",o)}
